var BMapGLLib=window.BMapGLLib=BMapGLLib||{};(function(){var a=a||{guid:"$BAIDU$"};(function(){window[a.guid]={};a.extend=function(e,c){for(var d in c){if(c.hasOwnProperty(d)){e[d]=c[d]}}return e};a.lang=a.lang||{};a.lang.guid=function(){return"TANGRAM__"+(window[a.guid]._counter++).toString(36)};window[a.guid]._counter=window[a.guid]._counter||1;window[a.guid]._instances=window[a.guid]._instances||{};a.lang.Class=function(c){this.guid=c||a.lang.guid();window[a.guid]._instances[this.guid]=this};window[a.guid]._instances=window[a.guid]._instances||{};a.lang.isString=function(c){return"[object String]"==Object.prototype.toString.call(c)};a.lang.isFunction=function(c){return"[object Function]"==Object.prototype.toString.call(c)};a.lang.Class.prototype.toString=function(){return"[object "+(this._className||"Object")+"]"};a.lang.Class.prototype.dispose=function(){delete window[a.guid]._instances[this.guid];for(var c in this){if(!a.lang.isFunction(this[c])){delete this[c]}}this.disposed=true};a.lang.Event=function(c,d){this.type=c;this.returnValue=true;this.target=d||null;this.currentTarget=null};a.lang.Class.prototype.addEventListener=function(f,e,d){if(!a.lang.isFunction(e)){return}!this.__listeners&&(this.__listeners={});var c=this.__listeners,g;if(typeof d=="string"&&d){if(/[^\w\-]/.test(d)){throw ("nonstandard key:"+d)}else{e.hashCode=d;g=d}}f.indexOf("on")!=0&&(f="on"+f);typeof c[f]!="object"&&(c[f]={});g=g||a.lang.guid();e.hashCode=g;c[f][g]=e};a.lang.Class.prototype.removeEventListener=function(e,d){if(a.lang.isFunction(d)){d=d.hashCode}else{if(!a.lang.isString(d)){return}}!this.__listeners&&(this.__listeners={});e.indexOf("on")!=0&&(e="on"+e);var c=this.__listeners;if(!c[e]){return}c[e][d]&&delete c[e][d]};a.lang.Class.prototype.dispatchEvent=function(f,c){if(a.lang.isString(f)){f=new a.lang.Event(f)}!this.__listeners&&(this.__listeners={});c=c||{};for(var e in c){f[e]=c[e]}var e,d=this.__listeners,g=f.type;f.target=f.target||this;f.currentTarget=this;g.indexOf("on")!=0&&(g="on"+g);a.lang.isFunction(this[g])&&this[g].apply(this,arguments);if(typeof d[g]=="object"){for(e in d[g]){d[g][e].apply(this,arguments)}}return f.returnValue};a.lang.inherits=function(i,g,f){var e,h,c=i.prototype,d=new Function();d.prototype=g.prototype;h=i.prototype=new d();for(e in c){h[e]=c[e]}i.prototype.constructor=i;i.superClass=g.prototype;if("string"==typeof f){h._className=f}};a.dom=a.dom||{};a._g=a.dom._g=function(c){if(a.lang.isString(c)){return document.getElementById(c)}return c};a.g=a.dom.g=function(c){if("string"==typeof c||c instanceof String){return document.getElementById(c)}else{if(c&&c.nodeName&&(c.nodeType==1||c.nodeType==9)){return c}}return null};a.insertHTML=a.dom.insertHTML=function(f,c,e){f=a.dom.g(f);var d,g;if(f.insertAdjacentHTML){f.insertAdjacentHTML(c,e)}else{d=f.ownerDocument.createRange();c=c.toUpperCase();if(c=="AFTERBEGIN"||c=="BEFOREEND"){d.selectNodeContents(f);d.collapse(c=="AFTERBEGIN")}else{g=c=="BEFOREBEGIN";d[g?"setStartBefore":"setEndAfter"](f);d.collapse(g)}d.insertNode(d.createContextualFragment(e))}return f};a.ac=a.dom.addClass=function(h,j){h=a.dom.g(h);var d=j.split(/\s+/),c=h.className,g=" "+c+" ",f=0,e=d.length;for(;f<e;f++){if(g.indexOf(" "+d[f]+" ")<0){c+=(c?" ":"")+d[f]}}h.className=c;return h};a.event=a.event||{};a.event._listeners=a.event._listeners||[];a.on=a.event.on=function(d,g,i){g=g.replace(/^on/i,"");d=a._g(d);var h=function(k){i.call(d,k)},c=a.event._listeners,f=a.event._eventFilter,j,e=g;g=g.toLowerCase();if(f&&f[g]){j=f[g](d,g,h);e=j.type;h=j.listener}if(d.addEventListener){d.addEventListener(e,h,false)}else{if(d.attachEvent){d.attachEvent("on"+e,h)}}c[c.length]=[d,g,i,h,e];return d};a.un=a.event.un=function(e,h,d){e=a._g(e);h=h.replace(/^on/i,"").toLowerCase();var k=a.event._listeners,f=k.length,g=!d,j,i,c;while(f--){j=k[f];if(j[1]===h&&j[0]===e&&(g||j[2]===d)){i=j[4];c=j[3];if(e.removeEventListener){e.removeEventListener(i,c,false)}else{if(e.detachEvent){e.detachEvent("on"+i,c)}}k.splice(f,1)}}return e};a.preventDefault=a.event.preventDefault=function(c){if(c.preventDefault){c.preventDefault()}else{c.returnValue=false}}})();var b=BMapGLLib.CustomOverlay=function(c,f,d){this._point=new BMapGL.Point(c.lng,c.lat);this._html=f||"";this._options=d||{};var g=new BMapGL.Overlay();for(var e in g){if(e!=="initialize"&&e!=="draw"&&e!=="setPosition"&&e!=="toString"&&e!=="addEventListener"&&e!=="removeEventListener"&&e!=="dispatchEvent"){this.__proto__[e]=g[e]}}};a.lang.inherits(b,a.lang.Class,"CustomOverlay");b.prototype.initialize=function(d){this._map=d;this._div=document.createElement("div");this._div.style.position="absolute";this._div.style.zIndex=this._options.zIndex||BMapGL.Overlay.getZIndex(this._point.lat);if(this._html instanceof HTMLElement){this._div.appendChild(this._html)}else{this._div.innerHTML=this._html}var c=this;this._div.onmousedown=function(g){g=g||window.event;var e=g.clientX||g.pageX;var i=g.clientY||g.pageY;var f=new BMapGL.Pixel(e,i);var h=d.pixelToPoint(f);
c.dispatchEvent("onmousedown",{latlng:h});if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};this._div.onmousemove=function(g){g=g||window.event;var e=g.clientX||g.pageX;var i=g.clientY||g.pageY;var f=new BMapGL.Pixel(e,i);var h=d.pixelToPoint(f);c.dispatchEvent("onmousemove",{latlng:h});if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}return false};this._div.onmouseup=function(g){d.enableDragging();g=g||window.event;if(g.preventDefault){g.preventDefault()}else{g.returnValue=false}var e=g.clientX||g.pageX;var i=g.clientY||g.pageY;var f=new BMapGL.Pixel(e,i);var h=d.pixelToPoint(f);c.dispatchEvent("onmouseup",{latlng:h});return false};d.getPanes().floatShadow.appendChild(this._div);return this._div};b.prototype.draw=function(){var f=this._map;var d=f.pointToOverlayPixel(this._point);var g={width:0,height:0};if(this._options&&this._options.offset){g=this._options.offset}var c=g.width;var e=g.height;if(this._options&&this._options.unit&&this._options.unit==="m"){c/=f.getZoomUnits();e/=f.getZoomUnits()}this._div.style.left=d.x+c+"px";this._div.style.top=d.y+e+"px";this._div.style.transform="translate(-50%, -50%)"};b.prototype.setPosition=function(c){this._point=new BMapGL.Point(c.lng,c.lat)}})();